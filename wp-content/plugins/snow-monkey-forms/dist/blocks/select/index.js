(()=>{"use strict";const e=window.wp.blocks,n=JSON.parse('{"u2":"snow-monkey-forms/control-select"}'),t=window.wp.element,o=window.wp.blockEditor,a=window.wp.components,l=window.wp.compose,r=window.wp.i18n,s=({value:e,onChange:n})=>{const o={};return""===e&&(o.borderColor="#d94f4f"),(0,t.createElement)(a.TextControl,{label:(0,r.__)("name","snow-monkey-forms"),help:(0,r.__)("Required. Input a unique machine-readable name.","snow-monkey-forms"),value:e,onChange:n,required:!0,style:o})},c=({value:e,onChange:n,multiple:o=!1})=>{const l=o?a.TextareaControl:a.TextControl;return(0,t.createElement)(l,{label:(0,r.__)("value","snow-monkey-forms"),help:(0,r.__)("Optional. Initial value.","snow-monkey-forms"),value:e,onChange:n})},i=({value:e,onChange:n,options:o=[]})=>{const l=1>o.length?["","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","email","username","new-password","current-password","one-time-code","organization-title","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-extension","impp","url","photo"].map((e=>({value:e,label:e}))):o;return(0,t.createElement)(a.SelectControl,{label:(0,r.__)("autocomplete","snow-monkey-forms"),value:e,options:l,onChange:n})},m=({value:e,onChange:n})=>(0,t.createElement)(a.TextControl,{label:(0,r.__)("id","snow-monkey-forms"),value:e,onChange:n}),u=({value:e,onChange:n})=>(0,t.createElement)(a.TextControl,{label:(0,r.__)("class","snow-monkey-forms"),help:(0,r.__)("Separate multiple classes with spaces.","snow-monkey-forms"),value:e,onChange:n}),d=({value:e,onChange:n})=>{const o={};return""===e&&(o.borderColor="#d94f4f"),(0,t.createElement)(a.TextareaControl,{label:(0,r.__)("options","snow-monkey-forms"),value:e,help:(0,r.sprintf)(
// translators: %1$s: line-break-char
(0,r.__)('Required. Enter in the following format: "value" : "label"%1$s or value%1$s',"snow-monkey-forms"),"â†µ"),onChange:n,required:!0,style:o})},p=window.lodash;const v=(0,l.createHigherOrderComponent)((e=>n=>{const{attributes:l,setAttributes:s}=n,{validations:c}=l;if(void 0===c)return(0,t.createElement)(e,{...n});const i=JSON.parse(c);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,r.__)("Validation","snow-monkey-forms")},(0,t.createElement)(a.ToggleControl,{label:(0,r.__)("Required","snow-monkey-forms"),checked:!!i.required,onChange:e=>{s({validations:JSON.stringify((0,p.merge)(i,{required:e}))})}}))),(0,t.createElement)(e,{...n}))}),"withValidations"),f=(0,l.compose)(v)((({attributes:e,setAttributes:n})=>{const{name:l,value:v,options:f,id:h,controlClass:w,description:g,isDisplayDescriptionConfirm:y,autocomplete:C}=e;(0,t.useEffect)((()=>{""===l&&n({name:`select-${((new Date).getTime()+Math.floor(8999*Math.random()+1e3)).toString(32)}`}),""===f&&n({options:'value1\n"value2" : "label2"\n"value3" : "label3"'})}));const b=function(e){const n=e.replace(/\r?\n/g,"\n").split("\n");return(0,p.uniqBy)(n.map((e=>{const n=(()=>{try{return JSON.parse(`{ ${e} }`)}catch(n){return{[e]:e}}})();return{value:Object.keys(n)[0],label:Object.values(n)[0]}})),"value").map((e=>{const n={};return n[e.value]=e.label,n}))}(f),E=(0,o.useBlockProps)({className:"smf-placeholder"});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,r.__)("Attributes","snow-monkey-forms")},(0,t.createElement)(s,{value:l,onChange:e=>n({name:e})}),(0,t.createElement)(d,{value:f,onChange:e=>n({options:e})}),(0,t.createElement)(c,{value:v,onChange:e=>n({value:e})}),(0,t.createElement)(i,{value:C,onChange:e=>n({autocomplete:e})}),(0,t.createElement)(m,{value:h,onChange:e=>n({id:e})}),(0,t.createElement)(u,{value:w,onChange:e=>n({controlClass:e})})),(0,t.createElement)(a.PanelBody,{title:(0,r.__)("Block settings","snow-monkey-forms")},(0,t.createElement)(a.TextControl,{label:(0,r.__)("Description","snow-monkey-forms"),value:g,onChange:e=>n({description:e})}),(0,t.createElement)(a.ToggleControl,{label:(0,r.__)("Description is also displayed on the confirmation screen","snow-monkey-forms"),checked:y,onChange:e=>{n({isDisplayDescriptionConfirm:e})}}))),(0,t.createElement)("div",{...E,"data-name":l},(0,t.createElement)("div",{className:"smf-select-control"},(0,t.createElement)("select",{name:l,value:v,disabled:"disabled",id:h||void 0,className:`smf-select-control__control ${w}`},b.map((e=>{const n=Object.keys(e)[0],o=Object.values(e)[0];return(0,t.createElement)("option",{value:n,key:n},o)}))),(0,t.createElement)("span",{className:"smf-select-control__toggle"})),g&&(0,t.createElement)("div",{className:"smf-control-description"},g)))}));(0,e.registerBlockType)(n.u2,{icon:{src:function(){return(0,t.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"#cd162c"}},(0,t.createElement)("path",{d:"M7.5 8.5L12 4.5L16.5 8.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M16.5 15.5L12 19.5L7.5 15.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}))}},edit:f,save:()=>null})})();